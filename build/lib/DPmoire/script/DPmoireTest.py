import argparse, os, yaml

from preprocess import Shifter, Envgen, Parameters
from data import ABRunner
from train import Trainer
from test.test import getAseForces, getVaspForces, findError

def main(args=None):

    parser = argparse.ArgumentParser(
        description="A module to test the Forcefiled generated by DPmoireTrain."
    )
    parser.add_argument(
        "config", help="YAML file configuring the module"
    )
    parser.add_argument(
        "--runMode", default="get", type=str, help="runMode: run or get. mission with run mode should be submitted to the computational node."
    )

    args = parser.parse_args(args=args)

    if not os.path.isfile(args.config):
        print("YAML not found!")
    params = Parameters(args.config)

    findError(params, 10, 40, args.runMode)

    print("Done!")